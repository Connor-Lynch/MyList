{"ast":null,"code":"import { ConfirmationDialogComponent } from './../../components/confirmation-dialog/confirmation-dialog.component';\nimport { AddListDialogComponent } from './components/add-list-dialog/add-list-dialog.component';\nimport { Subject } from 'rxjs';\nimport { filter, startWith, switchMap, takeUntil, tap } from 'rxjs/operators';\nimport { AppRoutes } from 'src/app/models/app-routes';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/shopping-list.service\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/material/card\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/icon\";\nimport * as i8 from \"@angular/material/divider\";\nimport * as i9 from \"./components/list-overview/list-overview.component\";\nconst _c0 = function (a0, a1) {\n  return [a0, a1];\n};\nfunction ShoppingListsPage_mat_card_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-card\", 4)(1, \"div\", 5)(2, \"mat-card-title\", 6);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"mat-divider\", 7);\n    i0.ɵɵelementStart(5, \"mat-card-content\", 8);\n    i0.ɵɵelement(6, \"app-list-overview\", 9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"mat-card-actions\", 10)(8, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function ShoppingListsPage_mat_card_1_Template_button_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const shoppingList_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.deleteShoppingList(shoppingList_r1));\n    });\n    i0.ɵɵelementStart(9, \"mat-icon\");\n    i0.ɵɵtext(10, \"delete_outline\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const shoppingList_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction2(3, _c0, \"/\" + ctx_r0.appRoutes.shoppingList.route, shoppingList_r1.id));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", shoppingList_r1.name, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"items\", shoppingList_r1.items);\n  }\n}\nexport let ShoppingListsPage = /*#__PURE__*/(() => {\n  class ShoppingListsPage {\n    constructor(shoppingListService, dialog) {\n      this.shoppingListService = shoppingListService;\n      this.dialog = dialog;\n      this.appRoutes = AppRoutes;\n      this.refreshShippingList$ = new Subject();\n      this.destroy$ = new Subject();\n    }\n    ngOnInit() {\n      this.initShoppingLists();\n    }\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n    toggleListAdd() {\n      this.dialog.open(AddListDialogComponent);\n    }\n    deleteShoppingList(shoppingList) {\n      const confirmationDialog = this.dialog.open(ConfirmationDialogComponent, {\n        data: {\n          message: `Delete ${shoppingList.name}`,\n          affirmativeButtonText: 'Delete',\n          affirmativeButtonColor: 'warn',\n          negativeButtonText: 'Cancel',\n          negativeButtonColor: 'primary'\n        }\n      });\n      confirmationDialog?.afterClosed().pipe(filter(result => result), switchMap(() => this.shoppingListService.removeShoppingList(shoppingList.id).pipe(tap(() => this.refreshShippingList$.next()))), takeUntil(this.destroy$)).subscribe();\n    }\n    initShoppingLists() {\n      this.shoppingLists$ = this.refreshShippingList$.pipe(startWith(() => null), switchMap(() => this.shoppingListService.getAllShoppingLists().pipe()));\n    }\n    static #_ = this.ɵfac = function ShoppingListsPage_Factory(t) {\n      return new (t || ShoppingListsPage)(i0.ɵɵdirectiveInject(i1.ShoppingListService), i0.ɵɵdirectiveInject(i2.MatDialog));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ShoppingListsPage,\n      selectors: [[\"app-shopping-lists\"]],\n      decls: 7,\n      vars: 3,\n      consts: [[1, \"card-list-container\", \"flex\", \"justify-content-between\", \"flex-wrap\", \"overflow-y-auto\", \"mx-5\"], [\"class\", \"card m-3 cursor-pointer\", \"id\", \"view-button\", 4, \"ngFor\", \"ngForOf\"], [1, \"add-fab\", \"fixed\", \"cursor-pointer\"], [\"mat-fab\", \"\", \"color\", \"primary\", \"id\", \"add-list-button\", 3, \"click\"], [\"id\", \"view-button\", 1, \"card\", \"m-3\", \"cursor-pointer\"], [\"id\", \"card-body\", 3, \"routerLink\"], [1, \"p-3\"], [1, \"mx-3\"], [1, \"list-overview\", \"mt-3\"], [3, \"items\"], [1, \"card-actions\", \"flex\", \"justify-content-end\"], [\"mat-icon-button\", \"\", \"color\", \"warn\", \"id\", \"delete-button\", 3, \"click\"]],\n      template: function ShoppingListsPage_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0);\n          i0.ɵɵtemplate(1, ShoppingListsPage_mat_card_1_Template, 11, 6, \"mat-card\", 1);\n          i0.ɵɵpipe(2, \"async\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"div\", 2)(4, \"button\", 3);\n          i0.ɵɵlistener(\"click\", function ShoppingListsPage_Template_button_click_4_listener() {\n            return ctx.toggleListAdd();\n          });\n          i0.ɵɵelementStart(5, \"mat-icon\");\n          i0.ɵɵtext(6, \"add\");\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(2, 1, ctx.shoppingLists$));\n        }\n      },\n      dependencies: [i3.NgForOf, i4.RouterLink, i5.MatCard, i5.MatCardActions, i5.MatCardContent, i5.MatCardTitle, i6.MatIconButton, i6.MatFabButton, i7.MatIcon, i8.MatDivider, i9.ListOverviewComponent, i3.AsyncPipe],\n      styles: [\".card-list-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:45%;height:20%}@media only screen and (max-width: 600px){.card-list-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100%;overflow:hidden}}.add-fab[_ngcontent-%COMP%]{bottom:5%;right:5%}\"]\n    });\n  }\n  return ShoppingListsPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}